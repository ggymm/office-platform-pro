<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>curl.md.html</title>
  <style>code{white-space: pre;}</style>
  <style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<div id="wrapper">  
<h1 id="curl">curl</h1>
<p>利用URL规则在命令行下工作的文件传输工具</p>
<h2 id="补充说明">补充说明</h2>
<p><strong>curl命令</strong>
是一个利用URL规则在命令行下工作的文件传输工具。它支持文件的上传和下载，所以是综合传输工具，但按传统，习惯称curl为下载工具。作为一款强力工具，curl支持包括HTTP、HTTPS、ftp等众多协议，还支持POST、cookies、认证、从指定偏移处下载部分文件、用户代理字符串、限速、文件大小、进度条等特征。做网页处理流程和数据检索自动化，curl可以祝一臂之力。</p>
<h3 id="语法">语法</h3>
<pre class="shell"><code>curl(选项)(参数)</code></pre>
<h3 id="选项">选项</h3>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">-a/--append</span>                                   <span class="co"># 上传文件时，附加到目标文件 </span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="ex">-A/--user-agent</span>                               <span class="co"># 设置用户代理发送给服务器 </span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="ex">-anyauth</span>                                      <span class="co"># 可以使用“任何”身份验证方法 </span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="ex">-b/--cookie</span>                                   <span class="co"># cookie字符串或文件读取位置 </span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --basic                                  <span class="co"># 使用HTTP基本验证 </span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="ex">-B/--use-ascii</span>                                <span class="co"># 使用ASCII /文本传输 </span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="ex">-c/--cookie-jar</span>                               <span class="co"># 操作结束后把cookie写入到这个文件中 </span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="ex">-C/--continue-at</span>                              <span class="co"># 断点续传 </span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="ex">-d/--data</span>                                     <span class="co"># HTTP POST方式传送数据 </span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --data-ascii                             <span class="co"># 以ascii的方式post数据 </span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --data-binary                            <span class="co"># 以二进制的方式post数据 </span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --negotiate                              <span class="co"># 使用HTTP身份验证 </span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --digest                                 <span class="co"># 使用数字身份验证 </span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --disable-eprt                           <span class="co"># 禁止使用EPRT或LPRT </span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --disable-epsv                           <span class="co"># 禁止使用EPSV </span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="ex">-D/--dump-header</span>                              <span class="co"># 把header信息写入到该文件中 </span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --egd-file                               <span class="co"># 为随机数据(SSL)设置EGD socket路径 </span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --tcp-nodelay                            <span class="co"># 使用TCP\_NODELAY选项 </span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="ex">-e/--referer</span>                                  <span class="co"># 来源网址 </span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="ex">-E/--cert</span>                                     <span class="co"># 客户端证书文件和密码 (SSL)</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --cert-type                              <span class="co"># 证书文件类型 (DER/PEM/ENG) (SSL)</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --key                                    <span class="co"># 私钥文件名 (SSL)</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --key-type                               <span class="co"># 私钥文件类型 (DER/PEM/ENG) (SSL)</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --pass                                   <span class="co"># 私钥密码 (SSL)</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --engine                                 <span class="co"># 加密引擎使用 (SSL). &quot;--engine list&quot; for list </span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --cacert                                 <span class="co"># CA证书 (SSL)</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --capath                                 <span class="co"># CA目录 (made using c\_rehash) to verify peer against (SSL)</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --ciphers                                <span class="co"># SSL密码 </span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --compressed                             <span class="co"># 要求返回是压缩的形势 (using deflate or gzip)</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --connect-timeout                        <span class="co"># 设置最大请求时间 </span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --create-dirs                            <span class="co"># 建立本地目录的目录层次结构 </span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --crlf                                   <span class="co"># 上传是把LF转变成CRLF </span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a><span class="ex">-f/--fail</span>                                     <span class="co"># 连接失败时不显示http错误 </span></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --ftp-create-dirs                        <span class="co"># 如果远程目录不存在，创建远程目录 </span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --ftp-method <span class="dt">\[</span>multicwd/nocwd/singlecwd] <span class="co"># 控制CWD的使用 </span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --ftp-pasv                               <span class="co"># 使用 PASV/EPSV 代替端口 </span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --ftp-skip-pasv-ip                       <span class="co"># 使用PASV的时候,忽略该IP地址 </span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --ftp-ssl                                <span class="co"># 尝试用 SSL/TLS 来进行ftp数据传输 </span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --ftp-ssl-reqd                           <span class="co"># 要求用 SSL/TLS 来进行ftp数据传输 </span></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a><span class="ex">-F/--form</span>                                     <span class="co"># 模拟http表单提交数据 </span></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --form-string                            <span class="co"># 模拟http表单提交数据 </span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a><span class="ex">-g/--globoff</span>                                  <span class="co"># 禁用网址序列和范围使用{}和\[] </span></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a><span class="ex">-G/--get</span>                                      <span class="co"># 以get的方式来发送数据 </span></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a><span class="ex">-H/--header</span>                                   <span class="co"># 自定义头信息传递给服务器 </span></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --ignore-content-length                  <span class="co"># 忽略的HTTP头信息的长度 </span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a><span class="ex">-i/--include</span>                                  <span class="co"># 输出时包括protocol头信息 </span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a><span class="ex">-I/--head</span>                                     <span class="co"># 只显示请求头信息 </span></span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a><span class="ex">-j/--junk-session-cookies</span>                     <span class="co"># 读取文件进忽略session cookie </span></span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --interface                              <span class="co"># 使用指定网络接口/地址 </span></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --krb4                                   <span class="co"># 使用指定安全级别的krb4 </span></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a><span class="ex">-k/--insecure</span>                                 <span class="co"># 允许不使用证书到SSL站点 </span></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a><span class="ex">-K/--config</span>                                   <span class="co"># 指定的配置文件读取 </span></span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a><span class="ex">-l/--list-only</span>                                <span class="co"># 列出ftp目录下的文件名称 </span></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --limit-rate                             <span class="co"># 设置传输速度 </span></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --local-port                             <span class="co"># 强制使用本地端口号 </span></span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a><span class="ex">-m/--max-time</span>                                 <span class="co"># 设置最大传输时间 </span></span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --max-redirs                             <span class="co"># 设置最大读取的目录数 </span></span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --max-filesize                           <span class="co"># 设置最大下载的文件总量 </span></span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a><span class="ex">-M/--manual</span>                                   <span class="co"># 显示全手动 </span></span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a><span class="ex">-n/--netrc</span>                                    <span class="co"># 从netrc文件中读取用户名和密码 </span></span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --netrc-optional                         <span class="co"># 使用 .netrc 或者 URL来覆盖-n </span></span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --ntlm                                   <span class="co"># 使用 HTTP NTLM 身份验证 </span></span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a><span class="ex">-N/--no-buffer</span>                                <span class="co"># 禁用缓冲输出 </span></span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a><span class="ex">-o/--output</span>                                   <span class="co"># 把输出写到该文件中 </span></span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a><span class="ex">-O/--remote-name</span>                              <span class="co"># 把输出写到该文件中，保留远程文件的文件名 </span></span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a><span class="ex">-p/--proxytunnel</span>                              <span class="co"># 使用HTTP代理 </span></span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --proxy-anyauth                          <span class="co"># 选择任一代理身份验证方法 </span></span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --proxy-basic                            <span class="co"># 在代理上使用基本身份验证 </span></span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --proxy-digest                           <span class="co"># 在代理上使用数字身份验证 </span></span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --proxy-ntlm                             <span class="co"># 在代理上使用ntlm身份验证 </span></span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a><span class="ex">-P/--ftp-port</span>                                 <span class="co"># 使用端口地址，而不是使用PASV </span></span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a><span class="ex">-q</span>                                            <span class="co"># 作为第一个参数，关闭 .curlrc </span></span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a><span class="ex">-Q/--quote</span>                                    <span class="co"># 文件传输前，发送命令到服务器 </span></span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a><span class="ex">-r/--range</span>                                    <span class="co"># 检索来自HTTP/1.1或FTP服务器字节范围 </span></span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a><span class="ex">--range-file</span>                                  <span class="co"># 读取（SSL）的随机文件 </span></span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a><span class="ex">-R/--remote-time</span>                              <span class="co"># 在本地生成文件时，保留远程文件时间 </span></span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --retry                                  <span class="co"># 传输出现问题时，重试的次数 </span></span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --retry-delay                            <span class="co"># 传输出现问题时，设置重试间隔时间 </span></span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --retry-max-time                         <span class="co"># 传输出现问题时，设置最大重试时间 </span></span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a><span class="ex">-s/--silent</span>                                   <span class="co"># 静默模式。不输出任何东西 </span></span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a><span class="ex">-S/--show-error</span>                               <span class="co"># 显示错误 </span></span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --socks4                                 <span class="co"># 用socks4代理给定主机和端口 </span></span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --socks5                                 <span class="co"># 用socks5代理给定主机和端口 </span></span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --stderr                                 <span class="co">#   </span></span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a><span class="ex">-t/--telnet-option</span>                            <span class="co"># Telnet选项设置 </span></span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --trace                                  <span class="co"># 对指定文件进行debug </span></span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --trace-ascii                            <span class="co"># Like --跟踪但没有hex输出 </span></span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --trace-time                             <span class="co"># 跟踪/详细输出时，添加时间戳 </span></span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a><span class="ex">-T/--upload-file</span>                              <span class="co"># 上传文件 </span></span>
<span id="cb2-90"><a href="#cb2-90" aria-hidden="true" tabindex="-1"></a><span class="ex"> </span>    --url                                    <span class="co"># Spet URL to work with </span></span>
<span id="cb2-91"><a href="#cb2-91" aria-hidden="true" tabindex="-1"></a><span class="ex">-u/--user</span>                                     <span class="co"># 设置服务器的用户和密码 </span></span>
<span id="cb2-92"><a href="#cb2-92" aria-hidden="true" tabindex="-1"></a><span class="ex">-U/--proxy-user</span>                               <span class="co"># 设置代理用户名和密码 </span></span>
<span id="cb2-93"><a href="#cb2-93" aria-hidden="true" tabindex="-1"></a><span class="ex">-w/--write-out</span> <span class="dt">\[</span>format]                      <span class="co"># 什么输出完成后 </span></span>
<span id="cb2-94"><a href="#cb2-94" aria-hidden="true" tabindex="-1"></a><span class="ex">-x/--proxy</span>                                    <span class="co"># 在给定的端口上使用HTTP代理 </span></span>
<span id="cb2-95"><a href="#cb2-95" aria-hidden="true" tabindex="-1"></a><span class="ex">-X/--request</span>                                  <span class="co"># 指定什么命令 </span></span>
<span id="cb2-96"><a href="#cb2-96" aria-hidden="true" tabindex="-1"></a><span class="ex">-y/--speed-time</span>                               <span class="co"># 放弃限速所要的时间，默认为30 </span></span>
<span id="cb2-97"><a href="#cb2-97" aria-hidden="true" tabindex="-1"></a><span class="ex">-Y/--speed-limit</span>                              <span class="co"># 停止传输速度的限制，速度时间 </span></span></code></pre></div>
<h3 id="实例">实例</h3>
<p><strong>文件下载</strong></p>
<p>curl命令可以用来执行下载、发送各种HTTP请求，指定HTTP头部等操作。如果系统没有curl可以使用<code>yum install curl</code>安装，也可以下载安装。curl是将下载文件输出到stdout，将进度信息输出到stderr，不显示进度信息使用<code>--silent</code>选项。</p>
<pre class="shell"><code>curl URL --silent</code></pre>
<p>这条命令是将下载文件输出到终端，所有下载的数据都被写入到stdout。</p>
<p>使用选项<code>-O</code>将下载的数据写入到文件，必须使用文件的绝对地址：</p>
<pre class="shell"><code>curl http://example.com/text.iso --silent -O</code></pre>
<p>选项<code>-o</code>将下载数据写入到指定名称的文件中，并使用<code>--progress</code>显示进度条：</p>
<pre class="shell"><code>curl http://example.com/test.iso -o filename.iso --progress
######################################### 100.0%</code></pre>
<p><strong>不输出错误和进度信息</strong></p>
<p><code>-s</code> 参数将不输出错误和进度信息。</p>
<pre class="shell"><code>curl -s https://www.example.com
# 上面命令一旦发生错误，不会显示错误信息。不发生错误的话，会正常显示运行结果。</code></pre>
<p>如果想让 curl 不产生任何输出，可以使用下面的命令。</p>
<pre class="shell"><code>curl -s -o /dev/null https://google.com</code></pre>
<p><strong>断点续传</strong></p>
<p>curl能够从特定的文件偏移处继续下载，它可以通过指定一个便宜量来下载部分文件：</p>
<pre class="shell"><code>curl URL/File -C 偏移量

#偏移量是以字节为单位的整数，如果让curl自动推断出正确的续传位置使用-C -：
curl -C -URL</code></pre>
<p><strong>使用curl设置参照页字符串</strong></p>
<p>参照页是位于HTTP头部中的一个字符串，用来表示用户是从哪个页面到达当前页面的，如果用户点击网页A中的某个连接，那么用户就会跳转到B网页，网页B头部的参照页字符串就包含网页A的URL。</p>
<p>使用<code>--referer</code>选项指定参照页字符串：</p>
<pre class="shell"><code>curl --referer http://www.google.com http://wangchujiang.com</code></pre>
<p><strong>用curl设置用户代理字符串</strong></p>
<p>有些网站访问会提示只能使用IE浏览器来访问，这是因为这些网站设置了检查用户代理，可以使用curl把用户代理设置为IE，这样就可以访问了。使用<code>--user-agent</code>或者<code>-A</code>选项：</p>
<pre class="shell"><code>curl URL --user-agent &quot;Mozilla/5.0&quot;
curl URL -A &quot;Mozilla/5.0&quot;</code></pre>
<p>其他HTTP头部信息也可以使用curl来发送，使用<code>-H</code>“头部信息”
传递多个头部信息，例如：</p>
<pre class="shell"><code>curl -H &quot;Host:wangchujiang.com&quot; -H &quot;accept-language:zh-cn&quot; URL</code></pre>
<p><strong>curl的带宽控制和下载配额</strong></p>
<p>使用<code>--limit-rate</code>限制curl的下载速度：</p>
<pre class="shell"><code>curl URL --limit-rate 50k</code></pre>
<p>命令中用k（千字节）和m（兆字节）指定下载速度限制。</p>
<p>使用<code>--max-filesize</code>指定可下载的最大文件大小：</p>
<pre class="shell"><code>curl URL --max-filesize bytes</code></pre>
<p>如果文件大小超出限制，命令则返回一个非0退出码，如果命令正常则返回0。</p>
<pre class="shell"><code>curl --limit-rate 200k https://example.com
# 上面命令将带宽限制在每秒 200K 字节。</code></pre>
<p><strong>用curl进行认证</strong></p>
<p>使用curl选项 -u 可以完成HTTP或者FTP的认证，可以指定密码，也可以不指定密码在后续操作中输入密码：</p>
<pre class="shell"><code>curl -u user:pwd http://wangchujiang.com
curl -u user http://wangchujiang.com</code></pre>
<p><strong>只打印响应头部信息</strong></p>
<p>通过<code>-I</code>或者<code>-head</code>可以只打印出HTTP头部信息：</p>
<pre class="shell"><code>[root@localhost text]# curl -I http://wangchujiang.com
HTTP/1.1 200 OK
Server: nginx/1.2.5
date: Mon, 10 Dec 2012 09:24:34 GMT
Content-Type: text/html; charset=UTF-8
Connection: keep-alive
Vary: Accept-Encoding
X-Pingback: http://wangchujiang.com/xmlrpc.php</code></pre>
<p><strong>get请求</strong></p>
<pre class="shell"><code>curl &quot;http://www.wangchujiang.com&quot;    # 如果这里的URL指向的是一个文件或者一幅图都可以直接下载到本地
curl -i &quot;http://www.wangchujiang.com&quot; # 显示全部信息
curl -l &quot;http://www.wangchujiang.com&quot; # 显示页面内容
curl -v &quot;http://www.wangchujiang.com&quot; # 显示get请求全过程解析</code></pre>
<p><strong>post请求</strong></p>
<pre class="shell"><code>$ curl -d &quot;param1=value1&amp;param2=value2&quot; &quot;http://www.wangchujiang.com/login&quot;

curl -d&#39;login=emma＆password=123&#39; -X POST https://wangchujiang.com/login
# 或者
$ curl -d &#39;login=emma&#39; -d &#39;password=123&#39; -X POST  https://wangchujiang.com/login</code></pre>
<p><code>--data-urlencode</code> 参数等同于 <code>-d</code>，发送
<code>POST</code> 请求的数据体，区别在于会自动将发送的数据进行
<code>URL</code> 编码。</p>
<pre class="shell"><code>curl --data-urlencode &#39;comment=hello world&#39; https://wangchujiang.com/login
# 上面代码中，发送的数据hello world之间有一个空格，需要进行 URL 编码。</code></pre>
<p><strong>读取本地文本文件的数据，向服务器发送</strong></p>
<pre class="shell"><code>curl -d &#39;@data.txt&#39; https://wangchujiang.com/upload
# 读取data.txt文件的内容，作为数据体向服务器发送。</code></pre>
<p><strong>json格式的post请求</strong></p>
<pre class="shell"><code>curl -l -H &quot;Content-type: application/json&quot; -X POST -d &#39;{&quot;phone&quot;:&quot;13521389587&quot;,&quot;password&quot;:&quot;test&quot;}&#39; http://wangchujiang.com/apis/users.json</code></pre>
<p><strong>向服务器发送 Cookie</strong></p>
<p>使用<code>--cookie "COKKIES"</code>选项来指定cookie，多个cookie使用分号分隔：</p>
<pre class="shell"><code>curl http://wangchujiang.com --cookie &quot;user=root;pass=123456&quot;</code></pre>
<p>将cookie另存为一个文件，使用<code>--cookie-jar</code>选项：</p>
<pre class="shell"><code>curl URL --cookie-jar cookie_file</code></pre>
<p><code>-b</code> 参数用来向服务器发送 Cookie。</p>
<pre class="shell"><code>curl -b &#39;foo=bar&#39; https://taobao.com
# 上面命令会生成一个标头Cookie: foo=bar，向服务器发送一个名为foo、值为bar的 Cookie。</code></pre>
<pre class="shell"><code>curl -b &#39;foo1=bar&#39; -b &#39;foo2=baz&#39; https://taobao.com
# 上面命令发送两个 Cookie。

```shell
curl -b cookies.txt https://www.taobao.com
# 上面命令读取本地文件 cookies.txt，里面是服务器设置的 Cookie（参见-c参数），将其发送到服务器。</code></pre>
<p><strong>Cookie 写入一个文件</strong></p>
<pre class="shell"><code>curl -c cookies.txt https://www.taobao.com
# 上面命令将服务器的 HTTP 回应所设置 Cookie 写入文本文件cookies.txt。</code></pre>
<p><strong>请求的来源</strong></p>
<p><code>-e</code> 参数用来设置 <code>HTTP</code> 的标头
<code>Referer</code>，表示请求的来源。</p>
<pre class="shell"><code>curl -e &#39;https://taobao.com?q=example&#39; https://www.example.com
# 上面命令将Referer标头设为 https://taobao.com?q=example。</code></pre>
<p><code>-H</code> 参数可以通过直接添加标头
<code>Referer</code>，达到同样效果。</p>
<pre class="shell"><code>curl -H &#39;Referer: https://taobao.com?q=example&#39; https://www.example.com</code></pre>
<p><strong>上传二进制文件</strong></p>
<p><code>-F</code> 参数用来向服务器上传二进制文件。</p>
<pre class="shell"><code>curl -F &#39;file=@photo.png&#39; https://taobao.com/profile
# 上面命令会给 HTTP 请求加上标头 Content-Type: multipart/form-data ，然后将文件photo.png作为file字段上传。</code></pre>
<p><code>-F</code> 参数可以指定 <code>MIME</code> 类型。</p>
<pre class="shell"><code>curl -F &#39;file=@photo.png;type=image/png&#39; https://taobao.com/profile
# 上面命令指定 MIME 类型为image/png，否则 curl 会把 MIME 类型设为 application/octet-stream。</code></pre>
<p><code>-F</code> 参数也可以指定文件名。</p>
<pre class="shell"><code>curl -F &#39;file=@photo.png;filename=me.png&#39; https://taobao.com/profile
# 上面命令中，原始文件名为photo.png，但是服务器接收到的文件名为me.png。</code></pre>
<p><strong>设置请求头</strong></p>
<p><code>-H</code> 参数添加 <code>HTTP</code> 请求的标头。</p>
<pre class="shell"><code>curl -H &#39;Accept-Language: en-US&#39; https://google.com
# 上面命令添加 HTTP 标头 Accept-Language: en-US。</code></pre>
<pre class="shell"><code>curl -H &#39;Accept-Language: en-US&#39; -H &#39;Secret-Message: xyzzy&#39; https://google.com
# 上面命令添加两个 HTTP 标头。</code></pre>
<pre class="shell"><code>curl -d &#39;{&quot;login&quot;: &quot;emma&quot;, &quot;pass&quot;: &quot;123&quot;}&#39; -H &#39;Content-Type: application/json&#39; https://google.com/login
# 上面命令添加 HTTP 请求的标头是 Content-Type: application/json，然后用 -d 参数发送 JSON 数据。</code></pre>
<p><strong>跳过 SSL 检测</strong></p>
<pre class="shell"><code>curl -k https://www.example.com
# 上面命令不会检查服务器的 SSL 证书是否正确。</code></pre>
<p><strong>请求跟随服务器的重定向</strong></p>
<p><code>-L</code> 参数会让 <code>HTTP</code>
请求跟随服务器的重定向。<code>curl</code> 默认不跟随重定向。</p>
<pre class="shell"><code>curl -L -d &#39;tweet=hi&#39; https://api.example.com/tweet</code></pre>
<p><strong>调试参数</strong></p>
<p><code>-v</code> 参数输出通信的整个过程，用于调试。</p>
<pre class="shell"><code>curl -v https://www.example.com
# --trace参数也可以用于调试，还会输出原始的二进制数据。</code></pre>
<pre class="shell"><code>$ curl --trace - https://www.example.com</code></pre>
<p><strong>获取本机外网ip</strong></p>
<pre class="shell"><code>curl ipecho.net/plain</code></pre>
<p><strong>使用 curl 测试网站加载速度</strong></p>
<p>命令有一个鲜为人知的选项，<code>-w</code>，该选项在请求结束之后打印本次请求的统计数据到标准输出。</p>
<p>首先，我们定义控制打印行为的格式化字符串。新建文本文件
<code>fmt.txt</code>，并填入下面的内容：</p>
<div class="sourceCode" id="cb40"><pre
class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>\n</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="dt">Response</span> <span class="dt">Time</span> <span class="cf">for</span>:<span class="ot"> %{</span><span class="st">url_effective</span><span class="ot">}</span>\n\n</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="cn">DNS</span> <span class="dt">Lookup</span> <span class="dt">Time</span>:\t\t<span class="kw">%{</span>time_namelookup<span class="kw">}</span>s\n</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="dt">Redirection</span> <span class="dt">Time</span>:\t\t<span class="kw">%{</span>time_redirect<span class="kw">}</span>s\n</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="dt">Connection</span> <span class="dt">Time</span>:\t\t<span class="kw">%{</span>time_connect<span class="kw">}</span>s\n</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="dt">App</span> <span class="dt">Connection</span> <span class="dt">Time</span>:\t\t<span class="kw">%{</span>time_appconnect<span class="kw">}</span>s\n</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="dt">Pre</span><span class="kw">-</span>transfer <span class="dt">Time</span>:\t\t<span class="kw">%{</span>time_pretransfer<span class="kw">}</span>s\n</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="dt">Start</span><span class="kw">-</span>transfer <span class="dt">Time</span>:\t\t<span class="kw">%{</span>time_starttransfer<span class="kw">}</span>s\n\n</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="dt">Total</span> <span class="dt">Time</span>:\t\t\t<span class="kw">%{</span>time_total<span class="kw">}</span>s\n</span></code></pre></div>
<p>curl 提供了很多置换变量，可以在格式化字符串中通过 <code>%{var}</code>
的形式使用。完整的变量列表可以在 <code>curl</code> 的
<code>manpage</code> 中查看。简单介绍一下我们使用的这几个变量：</p>
<ul>
<li><code>url_effective</code>: 执行完地址重定向之后的最终 URL；</li>
<li><code>time_namelookup</code>:
从请求开始至完成名称解析所花的时间，单位为秒，下同；</li>
<li><code>time_redirect</code>: 执行所有重定向所花的时间；</li>
<li><code>time_connect</code>: 从请求开始至建立 TCP
连接所花的时间；</li>
<li><code>time_appconnect</code>: 从请求开始至完成 SSL/SSH
握手所花的时间；</li>
<li><code>time_pretransfer</code>:
从请求开始至服务器准备传送文件所花的时间，包含了传送协商时间；</li>
<li><code>time_starttransfer</code>:
从请求开始至服务器准备传送第一个字节所花的时间；</li>
<li><code>time_total</code>: 完整耗时。</li>
</ul>
<p>然后执行请求，通过 <span class="citation"
data-cites="filename">@filename</span>
指定保存了格式化字符串的文件：</p>
<pre class="shell"><code>$ curl -L -s -w @fmt.txt -o /dev/null http://www.google.com</code></pre>
<p>输出：</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>Response Time <span class="cf">for</span><span class="op">:</span> http<span class="op">:</span><span class="co">//www.google.co.jp/?gfe_rd=cr&amp;dcr=0&amp;ei=cjIaWpTkHeiQ8QfnxYzoBA</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>DNS Lookup Time<span class="op">:</span>        <span class="fl">0.000038</span><span class="er">s</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>Redirection Time<span class="op">:</span>       <span class="fl">0.207271</span><span class="er">s</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>Connection Time<span class="op">:</span>        <span class="fl">0.000039</span><span class="er">s</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>App Connection Time<span class="op">:</span>    <span class="fl">0.000039</span><span class="er">s</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>Pre<span class="op">-</span>transfer Time<span class="op">:</span>      <span class="fl">0.000067</span><span class="er">s</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>Start<span class="op">-</span>transfer Time<span class="op">:</span>    <span class="fl">0.260115</span><span class="er">s</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>Total Time<span class="op">:</span>             <span class="fl">0.467691</span><span class="er">s</span></span></code></pre></div>
<h3 id="要求返回是压缩的状态">要求返回是压缩的状态</h3>
<pre class="shell"><code>▶ curl --compressed -o- -L https://yarnpkg.com/install.sh | bash
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100    54  100    54    0     0     42      0  0:00:01  0:00:01 --:--:--    42
100  2341  100  2341    0     0   1202      0  0:00:01  0:00:01 --:--:--  9289
Installing Yarn!
&gt; Downloading tarball...

[1/2]: https://yarnpkg.com/latest.tar.gz --&gt; /var/folders/j7/3xly5sk567s65ny5dnr__3b80000gn/T/yarn.tar.gz.XXXXXXXXXX.9hJsBsrA
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100    57  100    57    0     0     72      0 --:--:-- --:--:-- --:--:--    72
100    93  100    93    0     0     63      0  0:00:01  0:00:01 --:--:--    63
100   643  100   643    0     0    248      0  0:00:02  0:00:02 --:--:--   707
100 1215k  100 1215k    0     0   153k      0  0:00:07  0:00:07 --:--:--  305k

[2/2]: https://yarnpkg.com/latest.tar.gz.asc --&gt; /var/folders/j7/3xly5sk567s65ny5dnr__3b80000gn/T/yarn.tar.gz.XXXXXXXXXX.9hJsBsrA.asc
100    61  100    61    0     0    356      0 --:--:-- --:--:-- --:--:--   356
100    97  100    97    0     0    325      0 --:--:-- --:--:-- --:--:--   325
100   647  100   647    0     0   1283      0 --:--:-- --:--:-- --:--:--  1283
100   832  100   832    0     0   1107      0 --:--:-- --:--:-- --:--:--  812k</code></pre>
</div>
</body>
</html>